<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{jobsVIEW/layout-static}">
<head>
    <meta charset="UTF-8">
    <title>查看職缺申請項目詳情 - ProFit</title>
</head>

<body>
<div layout:fragment="content"> <!-- Thymeleaf layout 標籤，用於插入內容到 model 模板中 -->
    <h1 class="mt-4">職缺申請項目詳情</h1>
    <ol class="breadcrumb mb-4">
        <li class="breadcrumb-item"><a th:href="@{/jobsApplicationProject/list}">職缺申請管理</a></li>
        <li class="breadcrumb-item active">查看職缺申請項目詳情</li>
    </ol>
    <div class="card mb-4">
        <div class="card-body">
            <!-- 職缺表單 -->
            <form id="jobApplicationProjectForm">
                <!-- 職缺申請 ID -->
                <input type="hidden" id="jobsApplicationProjectId" name="jobsApplicationProjectId" th:value="${jobApplicationProject.jobsApplicationProjectId}" />



<!--                &lt;!&ndash; 應徵方 ID &ndash;&gt;-->
<!--                <div class="mb-3">-->
<!--                    <label for="applicantId" class="form-label">應徵方 ID</label>-->
<!--                    <input type="text" class="form-control" id="applicantId" name="applicant" th:value="${jobApplicationProject.applicant.userId}" readonly />-->
<!--                </div>-->



                <!-- 職缺申請狀態 -->
                <div class="mb-3">
                    <label for="jobsStatus" class="form-label">職缺狀態</label>
                    <input type="text" class="form-control" id="jobsStatus" name="jobsApplicationStatus" th:value="${jobApplicationProject.jobsApplicationStatus == 0 ? '開放中' : '已關閉'}" readonly />
                </div>

                <!-- 職缺項目 -->
                <div class="mb-3">
                    <label for="jobsProject" class="form-label">職缺項目</label>
                    <input type="text" class="form-control" id="jobsProject" name="jobsProject" th:value="${jobApplicationProject.jobsProject}" readonly />
                </div>

                <!-- 職缺金額 -->
                <div class="mb-3">
                    <label for="jobsAmount" class="form-label">職缺金額</label>
                    <input type="text" class="form-control" id="jobsAmount" name="jobsAmount" th:value="${jobApplicationProject.jobsAmount}" readonly />
                </div>



                <!-- 返回按鈕 -->
                <a th:href="@{/jobsApplication/list}" class="btn btn-secondary">返回</a>
            </form>
        </div>
    </div>
</div>

<script>
    // 這裡添加從後端獲取數據並填充到頁面的 JavaScript 代碼
    document.addEventListener('DOMContentLoaded', function() {
        // 假設職缺申請 ID 存儲在 URL 參數中
        const jobsApplicationId = new URLSearchParams(window.location.search).get('id');

        // 發送請求到後端 API
        fetch(`/api/jobsApplication/${jobsApplicationId}`)
            .then(response => response.json())
            .then(data => {
                // 找值到頁面
                document.getElementById('jobsApplicationId').textContent = data.jobsApplicationId;
                document.getElementById('poster').textContent = data.users;
                document.getElementById('applicant').textContent = data.users;
                document.getElementById('jobsApplicationDate').textContent = data.jobsApplicationDate;
                document.getElementById('jobsStatus').textContent = data.jobsStatus;
                document.getElementById('jobsApplicationContract').textContent = data.jobsApplicationContract;
            })
            .catch(error => console.error('獲取職缺數據時出錯:', error));
    })

    function goBack() {
        window.history.back();
    }

</script>

</body>
</html>